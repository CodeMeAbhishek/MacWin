{% extends 'advisor/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5 text-white">
  <h1 class="mb-4 text-3xl font-bold">Welcome {{ name }}</h1>

  <div class="mb-6">
    <p><strong>Skills:</strong> {{ skills }}</p>
    <p><strong>Experience:</strong> {{ experience }} years</p>
  </div>

  <hr class="mb-6 border-gray-500">

  <div class="mb-6">
    <h2 class="text-2xl font-semibold mb-3">üß† Quiz Answers:</h2>
    <ul class="space-y-4 list-disc pl-6">
      {% for item in quiz_data %}
        <li>
          <p class="font-semibold">{{ item.question }}</p>
          <p>Answer: {{ item.answer }}</p>
        </li>
      {% endfor %}
    </ul>
  </div>

  <hr class="my-6 border-gray-500">

  <div>
    <h2 class="text-2xl font-semibold mb-3">üí° Career Advice:</h2>
    <p class="whitespace-pre-line">{{ career_advice }}</p>
  </div>

  <hr class="my-6 border-gray-500">

  <div class="mb-6">
    <h2 class="text-2xl font-semibold mb-4">
      <i class="bi bi-people-fill me-2"></i> People Like You:
    </h2>
    {% if similar_people %}
      <div class="row g-4">
        {% for person in similar_people %}
          <div class="col-12">
            <div class="bg-dark rounded-4 p-4">
              <div class="d-flex align-items-center mb-4">
                <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center me-3" style="width: 64px; height: 64px;">
                  <span class="text-white fw-bold" style="font-size: 28px;">{{ person.name|make_list|first|upper }}</span>
                </div>
                <h3 class="h3 mb-0 text-primary">{{ person.name }}</h3>
              </div>
              
              <div class="d-flex flex-wrap gap-2 mb-3">
                {% for skill in person.skills.split %}
                  <span class="badge bg-primary rounded-pill px-3 py-2" style="font-size: 14px; background-color: #4169E1 !important;">{{ skill.strip }}</span>
                {% endfor %}
              </div>
              
              <div style="font-size: 16px; color: #6c757d;">
                {{ person.experience }} years
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-secondary bg-dark text-white border-0" role="alert">
        <i class="bi bi-info-circle me-2"></i>No similar users found yet.
      </div>
    {% endif %}
  </div>
  <hr class="my-6 border-gray-500">

  <div>
    <h2 class="text-2xl font-semibold mb-4 flex items-center gap-2">
      üåê Developers Like You on GitHub
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {% for dev in github_people %}
        <div class="bg-gray-900 rounded-2xl p-4 shadow-md flex items-start gap-4">
          <img src="{{ dev.avatar_url }}" alt="{{ dev.login }}" class="w-12 h-12 rounded-full object-cover">
          <div>
            <a href="{{ dev.html_url }}" target="_blank" class="text-blue-400 text-lg font-medium hover:underline">
              {{ dev.login }}
            </a>
            <p class="text-sm text-gray-400">
              {% if dev.location %}üìç {{ dev.location }}<br>{% endif %}
              üì¶ {{ dev.public_repos }} repos &nbsp;&nbsp;üë• {{ dev.followers }} followers
            </p>
            {% if dev.bio %}
              <p class="text-gray-300 text-sm mt-1 italic">"{{ dev.bio|truncatewords:15 }}"</p>
            {% endif %}
          </div>
        </div>
      {% empty %}
        <p>No GitHub developers found at this time.</p>
      {% endfor %}
    </div>
  </div>
  

  <hr class="my-6 border-gray-500">

  <div>
    <h2 class="text-2xl font-semibold mb-5">üöÄ Recommended Jobs:</h2>

    {% if recommendations %}
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {% for job in recommendations %}
          <div class="bg-gray-800 p-5 rounded-2xl shadow-md hover:shadow-lg transition duration-300">
            <h3 class="text-xl font-bold mb-2 text-blue-300">
              <i class="fas fa-briefcase mr-2"></i>{{ job.role }}
            </h3>

            <p class="mb-1">
              <span class="font-medium text-gray-400">Match Score:</span>
              <span class="text-green-400 font-semibold">{{ job.match_score }}</span>
            </p>

            <p class="mb-1">
              <span class="font-medium text-gray-400">Average Salary:</span>
              ‚Çπ<span class="text-yellow-300">{{ job.average_salary }}</span>
            </p>

            <p class="mb-2">
              <span class="font-medium text-gray-400">Demand Level:</span>
              <span class="text-pink-400">{{ job.demand_level }}</span>
            </p>

            <div class="mt-3">
              <span class="text-sm font-medium text-gray-400">Required Skills:</span>
              <div class="mt-2 flex flex-wrap gap-2">
                {% for skill in job.required_skills.split %}
                  <span class="bg-blue-700 text-white text-xs px-2 py-1 rounded-full">{{ skill.strip }}</span>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-400">No matching jobs found based on your skills right now.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
